<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="RKV - A multiplayer space artillery game with gravitational physics">
  <meta property="og:title" content="RKV - Gravity Game">
  <meta property="og:description" content="Fire probes through gravitational fields in this multiplayer space game">
  <meta property="og:type" content="website">
  <title>RKV â€” Gravitational Artillery</title>
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <noscript><p style="color:white;text-align:center;margin-top:40vh">JavaScript is required to play RKV.</p></noscript>
  <canvas id="gameCanvas"></canvas>

  <!-- Title Screen -->
  <div id="title-screen">
    <h1>RKV</h1>
    <p class="subtitle">Gravitational Artillery</p>
    <button id="play-btn">PLAY</button>
  </div>

  <!-- Loading Screen -->
  <div id="loading-screen" style="display:none">
    <p>Generating Universe...</p>
    <div class="spinner"></div>
  </div>

  <!-- Help / Controls / Mechanics overlay -->
  <div id="help-screen" style="display:none">
    <div class="help-content">
      <h2>Controls</h2>
      <table>
        <tr><td>Left-click drag</td><td>Pan camera</td></tr>
        <tr><td>Right-click hold</td><td>Aim direction (move mouse to set angle)</td></tr>
        <tr><td>Scroll wheel</td><td>Zoom in / out</td></tr>
        <tr><td>Scroll (while aiming)</td><td>Adjust launch power</td></tr>
        <tr><td>W / S / Arrow Up / Down</td><td>Fine-tune power</td></tr>
        <tr><td>F</td><td>Fire probe</td></tr>
      </table>

      <h3>Touch Controls</h3>
      <table>
        <tr><td>Drag</td><td>Pan camera</td></tr>
        <tr><td>Long press + drag</td><td>Aim direction</td></tr>
        <tr><td>Pinch</td><td>Zoom</td></tr>
        <tr><td>FIRE button</td><td>Launch probe</td></tr>
      </table>

      <h2>How to Play</h2>
      <p class="help-text">You control a planet in a gravity field. Fire <strong>probes</strong> at other planets to mine resources or attack enemies.</p>

      <h3>Mining</h3>
      <p class="help-text">Hit an <strong>unoccupied</strong> planet to mine 10% of its resources. Your probe is consumed (costs 50 titanium).</p>

      <h3>Attacking</h3>
      <p class="help-text">Hit an <strong>enemy</strong> planet to deal damage and steal resources. Deplete an enemy's resources to eliminate them.</p>

      <h3>Winning</h3>
      <p class="help-text">Accumulate <strong>10,000 total resources</strong> to win. Or be the last player standing.</p>

      <h3>Planet Types</h3>
      <table class="planet-table">
        <tr><td class="planet-dot" style="color:#2ecc71">&#9679;</td><td>Terrestrial</td><td>Habitable, titanium-rich</td></tr>
        <tr><td class="planet-dot" style="color:#5dade2">&#9679;</td><td>Ice Giant</td><td>Metamaterials-rich</td></tr>
        <tr><td class="planet-dot" style="color:#aab7b8">&#9679;</td><td>Dense Metal</td><td>Titanium + antimatter</td></tr>
        <tr><td class="planet-dot" style="color:#e88dd6">&#9679;</td><td>Nebula</td><td>Antimatter + metamaterials</td></tr>
        <tr><td class="planet-dot" style="color:#f5c842">&#9679;</td><td>Star</td><td>Massive, all resources</td></tr>
        <tr><td class="planet-dot" style="color:#e67e22">&#9679;</td><td>Gas Giant</td><td>Large, resource-rich</td></tr>
      </table>

      <button id="help-dismiss">GOT IT</button>
    </div>
  </div>

  <!-- HUD -->
  <div id="HUD" style="display:none">
    <div id="resource-panel">
      <div class="resource-row">
        <span class="resource-label">Power</span>
        <span class="resource-value" id="val-power">1.00</span>
      </div>
      <div class="resource-row">
        <span class="resource-label">Angle</span>
        <span class="resource-value" id="val-angle">0</span>
      </div>
      <hr>
      <div class="resource-row">
        <span class="resource-label titanium">Titanium</span>
        <span class="resource-value" id="val-titanium">0</span>
      </div>
      <div class="resource-row">
        <span class="resource-label antimatter">Antimatter</span>
        <span class="resource-value" id="val-antimatter">0</span>
      </div>
      <div class="resource-row">
        <span class="resource-label metamaterials">Metamaterials</span>
        <span class="resource-value" id="val-metamaterials">0</span>
      </div>
    </div>
    <div id="hud-buttons">
      <button id="mute-btn">Mute</button>
      <button id="help-btn">Help</button>
      <button id="toggle-settings-btn">Settings</button>
    </div>
    <div id="worldSizeControl" style="display:none">
      <label for="worldSizeRange">World Size</label>
      <input id="worldSizeRange" type="range" min="0.5" max="5" step="0.1" value="1">
      <input id="worldSizeNumber" type="number" min="0.5" max="5" step="0.1" value="1">
      <label for="planetCountNumber">Planets</label>
      <input id="planetCountNumber" type="number" min="1" max="200" step="1" value="100">
      <label for="gravityScale">Gravity Scale</label>
      <input id="gravityScale" type="number" min="0.1" max="10" step="0.1" value="1">
      <button id="applyWorldSize">Generate</button>
    </div>
  </div>

  <!-- Mobile Fire Button -->
  <button id="fire-btn" style="display:none">FIRE</button>

  <script src="/socket.io/socket.io.js"></script>
  <script type="module" src="client.js"></script>
</body>

</html>
